{"ast":null,"code":"var _jsxFileName = \"/opt/management-taptapnow/src/components/Photos.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/styles';\nimport { withStyles } from '@material-ui/core/styles';\nimport { userContext, getUserById } from '../utils/userContext';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport IconButton from '@material-ui/core/IconButton';\nimport { Link, Redirect } from 'react-router-dom';\nimport Add from '@material-ui/icons/Add';\nimport Modal from '@material-ui/core/Modal';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport icon_camera from '../assets/images/icon_camera.png';\nimport tkp from '../assets/images/tkp.png';\nimport { Alert, AlertTitle } from '@material-ui/lab';\nimport axios from 'axios';\nimport { urlFunction } from '../utils/urls';\nimport { menuPath } from '../utils/img_link';\nimport { Table, Paper, Avatar, Button } from '@material-ui/core';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport Fab from '@material-ui/core/Fab';\nimport Collapse from '@material-ui/core/Collapse';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst styles = theme => ({\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff'\n  },\n  root: {\n    flexGrow: 1\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary\n  },\n  content: {\n    padding: 0\n  },\n  item: {\n    padding: theme.spacing(3),\n    textAlign: 'center',\n    [theme.breakpoints.up('md')]: {\n      '&:not(:last-of-type)': {\n        borderRight: \"1px solid \".concat(theme.palette.divider)\n      }\n    },\n    [theme.breakpoints.down('sm')]: {\n      '&:not(:last-of-type)': {\n        borderBottom: \"1px solid \".concat(theme.palette.divider)\n      }\n    }\n  },\n  titleWrapper: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  label: {\n    marginLeft: theme.spacing(1)\n  },\n  overline: {\n    marginTop: theme.spacing(1)\n  },\n  paperModal: {\n    position: 'absolute',\n    marginLeft: \"33%\",\n    marginTop: \"5%\",\n    width: '33%',\n    height: 540,\n    backgroundColor: \"#fff\",\n    border: 'none'\n  }\n});\n\nclass Photos extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getPhotos = async () => {\n      let result = await axios.get(\"\".concat(urlFunction(), \"/photo\"));\n\n      if (result.data.length > 0) {\n        this.setState({\n          photos: result.data.reverse() || []\n        });\n      }\n    };\n\n    this.deletePhoto = async photo => {\n      this.setState({\n        openBackdrop: !this.state.openBackdrop\n      });\n      const config = {\n        method: 'DELETE',\n        headers: {\n          Authorization: 'bearer ' + this.state.user.token\n        }\n      };\n      fetch(\"\".concat(urlFunction(), \"/photo/\").concat(photo.photos_id), config).then(response => {\n        return response.json();\n      }).then(data => {\n        if (data) {\n          this.setState({\n            label: '',\n            imagePreviewUrl: '',\n            showProgress: false,\n            showSucess: true,\n            openBackdrop: !this.state.openBackdrop,\n            messageToshow: 'Delete'\n          });\n          this.getPhotos();\n        }\n      }).catch(err => {\n        this.setState({\n          showProgress: false,\n          error: true,\n          errorMessage: err.message,\n          openBackdrop: !this.state.openBackdrop\n        });\n      });\n    };\n\n    this.setSelectedDate = date => {\n      this.setState({\n        selectedDate: date\n      });\n    };\n\n    this.handleOpen = () => {\n      this.setState({\n        open: !this.state.open\n      });\n    };\n\n    this.addPhotoModal = () => {\n      this.setState({\n        open: !this.state.open\n      });\n    };\n\n    this._handleSubmit = e => {\n      this.setState({\n        openBackdrop: !this.state.openBackdrop\n      });\n      e.preventDefault();\n      const data = new FormData();\n      data.append('path', this.state.file);\n      data.append('label', this.state.label);\n      const config = {\n        method: 'POST',\n        headers: {\n          Authorization: 'bearer ' + this.state.user.token\n        },\n        body: data\n      };\n      fetch(\"\".concat(urlFunction(), \"/photo\"), config).then(response => {\n        return response.json();\n      }).then(data => {\n        if (data) {\n          this.setState({\n            label: '',\n            imagePreviewUrl: '',\n            showProgress: false,\n            showSucess: true,\n            openBackdrop: !this.state.openBackdrop,\n            messageToshow: 'Photo have been add'\n          });\n          this.getPhotos();\n        }\n      }).catch(err => {\n        this.setState({\n          showProgress: false,\n          error: true,\n          errorMessage: err.message,\n          openBackdrop: !this.state.openBackdrop\n        });\n      });\n    };\n\n    this.componentDidMount = async () => {\n      let user = await userContext();\n\n      if (user !== null) {\n        this.setState({\n          user: JSON.parse(user),\n          isLogin: true\n        });\n      } else {\n        this.setState({\n          isLogin: false\n        });\n      }\n\n      let userResult = await getUserById(JSON.parse(user).data.id_user, JSON.parse(user).token);\n\n      if (userResult.is_first_time_login == 0) {\n        this.setState({\n          isFirstTime: true\n        });\n      }\n\n      this.getPhotos();\n    };\n\n    this.handleCloseSnackbar = () => {\n      this.setState({\n        showSucess: !this.state.showSucess\n      });\n    };\n\n    this.handleInputChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this._handleImageChange = e => {\n      e.preventDefault();\n      let reader = new FileReader();\n      let file = e.target.files[0];\n\n      if (file) {\n        reader.readAsDataURL(file);\n\n        reader.onloadend = () => {\n          this.setState({\n            file: file,\n            imagePreviewUrl: reader.result,\n            logoToSend: file\n          });\n        };\n      }\n    };\n\n    this.state = {\n      user: {},\n      userResult: {},\n      photos: [],\n      open: false,\n      imagePreviewUrl: '',\n      value: '',\n      copied: false,\n      openAlert: false,\n      showSucess: false,\n      openBackdrop: false\n    };\n  }\n\n  render() {\n    let classes = this.props.classes;\n    let _this$state = this.state,\n        openBackdrop = _this$state.openBackdrop,\n        openAlert = _this$state.openAlert,\n        imagePreviewUrl = _this$state.imagePreviewUrl,\n        photos = _this$state.photos,\n        open = _this$state.open;\n\n    if (this.state.isLogin == false) {\n      return React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      });\n    }\n\n    if (this.state.isFirstTime == true) {\n      return React.createElement(Redirect, {\n        to: \"/customer_details/\".concat(this.state.user.data.id_user),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(TableContainer, {\n      style: {\n        marginTop: 80,\n        paddingLeft: 20,\n        paddingRight: 20,\n        width: window.innerWidth - 300\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, React.createElement(Backdrop, {\n      className: classes.backdrop,\n      open: openBackdrop,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }, React.createElement(CircularProgress, {\n      color: \"inherit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, \" Photos \"), this.state.user.data ? this.state.user.data.userTypeID == 1 ? React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      startIcon: React.createElement(Add, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }),\n      onClick: this.addPhotoModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, \"Add photo\") : null : null), React.createElement(Collapse, {\n      in: openAlert,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    }, React.createElement(Alert, {\n      action: React.createElement(IconButton, {\n        \"aria-label\": \"close\",\n        color: \"inherit\",\n        size: \"small\",\n        onClick: () => {\n          this.setState({\n            openAlert: false\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, React.createElement(CloseIcon, {\n        fontSize: \"inherit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310\n      },\n      __self: this\n    }, \"Copied\")), React.createElement(Table, {\n      component: Paper,\n      \"aria-label\": \"customized table\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329\n      },\n      __self: this\n    }, React.createElement(TableRow, {\n      style: {\n        backgroundColor: \"#fff\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }, React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335\n      },\n      __self: this\n    }, \" \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335\n      },\n      __self: this\n    }, \" List pictures  \"), \" \"), React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }), React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339\n      },\n      __self: this\n    }), React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341\n      },\n      __self: this\n    })), React.createElement(TableRow, {\n      style: {\n        backgroundColor: \"#eeefff\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    }, React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }, \"   \"), React.createElement(TableCell, {\n      align: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }, \" Name \"), React.createElement(TableCell, {\n      align: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350\n      },\n      __self: this\n    }, \" Link\"), React.createElement(TableCell, {\n      align: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }, \"Actions\")), React.createElement(TableBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354\n      },\n      __self: this\n    }, photos.map(pho => React.createElement(TableRow, {\n      className: classes.TableRowDesign,\n      style: {},\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356\n      },\n      __self: this\n    }, React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        alignItems: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361\n      },\n      __self: this\n    }, React.createElement(Avatar, {\n      style: {\n        width: 130,\n        height: 130\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: \"\".concat(menuPath).concat(pho.img_menu),\n      style: {\n        width: 130,\n        height: 130\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371\n      },\n      __self: this\n    })))), React.createElement(TableCell, {\n      align: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380\n      },\n      __self: this\n    }, \" \", pho.label, \" \"), React.createElement(TableCell, {\n      align: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382\n      },\n      __self: this\n    }, \"\".concat(menuPath).concat(pho.img_menu), React.createElement(CopyToClipboard, {\n      text: \"\".concat(menuPath).concat(pho.img_menu),\n      onCopy: () => this.setState({\n        copied: true,\n        openAlert: true\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389\n      },\n      __self: this\n    }, \"Copy\"))), React.createElement(TableCell, {\n      align: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395\n      },\n      __self: this\n    }, this.state.user.data ? this.state.user.data.userTypeID == 1 ? React.createElement(Fab, {\n      color: \"secondary\",\n      \"aria-label\": \"add\",\n      style: {\n        marginLeft: '6px'\n      },\n      onClick: this.deletePhoto.bind(this, pho),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399\n      },\n      __self: this\n    }, React.createElement(RemoveIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404\n      },\n      __self: this\n    })) : null : null))))), React.createElement(Modal, {\n      open: open,\n      onClose: this.handleOpen,\n      style: {\n        boxShadow: '0px 2px 0px 3px #ccc'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: classes.paperModal,\n      style: {\n        boxShadow: '0px 0px 2px #eee'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 424\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        backgroundColor: '#0f4c9b',\n        padding: 12\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 428\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: classes.search1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 440\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"h5\",\n      component: \"h2\",\n      style: {\n        marginLeft: 16,\n        color: '#fff',\n        fontSize: 15\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 441\n      },\n      __self: this\n    }, \"Add a picture\")))), React.createElement(\"div\", {\n      style: {\n        marginTop: 20,\n        width: '100%',\n        backgroundColor: '#fff',\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        backgroundColor: '#fff'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: imagePreviewUrl == '' ? tkp : imagePreviewUrl,\n      style: {\n        padding: 10,\n        height: 260,\n        width: 260,\n        borderRadius: 150,\n        background: \"#336699\",\n        cursor: 'pointer'\n      },\n      onClick: () => this.fileInputFormenuPic.click(),\n      alt: \"Click to add image\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      src: icon_camera,\n      style: {\n        height: 40,\n        width: 40,\n        borderRadius: 40,\n        padding: 5,\n        border: '2px solid #eee',\n        cursor: 'pointer'\n      },\n      onClick: () => this.fileInputFormenuPic.click(),\n      alt: \"Click to add image\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      style: {\n        width: '90%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 493\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      autoComplete: \"fname\",\n      name: \"label\",\n      variant: \"outlined\",\n      required: true,\n      fullWidth: true,\n      id: \"label\",\n      label: \"Photo label\",\n      autoFocus: true,\n      onChange: this.handleInputChange,\n      required: true,\n      value: this.state.label,\n      style: {\n        marginTop: 10,\n        marginLeft: 10,\n        marginRight: 10\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 498\n      },\n      __self: this\n    })), React.createElement(\"input\", {\n      variant: \"outlined\",\n      required: true,\n      fullWidth: true,\n      name: \"img_restaurant\",\n      label: \"\",\n      onChange: this._handleImageChange,\n      type: \"file\",\n      id: \"file\",\n      ref: fileInputFormenuPic => this.fileInputFormenuPic = fileInputFormenuPic,\n      style: {\n        display: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 518\n      },\n      __self: this\n    }), this.state.showSucess == true ? React.createElement(Alert, {\n      onClose: this.handleCloseSnackbar,\n      severity: \"success\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 535\n      },\n      __self: this\n    }, this.state.messageToshow) : null, this.state.imagePreviewUrl !== '' ? React.createElement(\"div\", {\n      style: {\n        width: '40%',\n        marginTop: 20,\n        marginLeft: 8\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 542\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"submit\",\n      fullWidth: true,\n      variant: \"contained\",\n      color: \"primary\",\n      className: classes.submit,\n      onClick: this._handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 548\n      },\n      __self: this\n    }, \"Add photo\")) : null, this.state.error == true ? React.createElement(Alert, {\n      severity: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 563\n      },\n      __self: this\n    }, \" \", this.state.errorMessage) : null, this.state.success == true ? React.createElement(Alert, {\n      severity: \"success\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 569\n      },\n      __self: this\n    }, \" Photo add successfully \") : null))));\n  }\n\n}\n\n;\nexport default withStyles(styles)(Photos);","map":{"version":3,"sources":["/opt/management-taptapnow/src/components/Photos.js"],"names":["React","Component","PropTypes","makeStyles","withStyles","userContext","getUserById","TableContainer","IconButton","Link","Redirect","Add","Modal","Typography","TextField","icon_camera","tkp","Alert","AlertTitle","axios","urlFunction","menuPath","Table","Paper","Avatar","Button","TableBody","TableCell","TableRow","RemoveIcon","Fab","Collapse","CloseIcon","CopyToClipboard","Backdrop","CircularProgress","styles","theme","backdrop","zIndex","drawer","color","root","flexGrow","paper","padding","spacing","textAlign","palette","text","secondary","content","item","breakpoints","up","borderRight","divider","down","borderBottom","titleWrapper","display","alignItems","justifyContent","label","marginLeft","overline","marginTop","paperModal","position","width","height","backgroundColor","border","Photos","constructor","props","getPhotos","result","get","data","length","setState","photos","reverse","deletePhoto","photo","openBackdrop","state","config","method","headers","Authorization","user","token","fetch","photos_id","then","response","json","imagePreviewUrl","showProgress","showSucess","messageToshow","catch","err","error","errorMessage","message","setSelectedDate","date","selectedDate","handleOpen","open","addPhotoModal","_handleSubmit","e","preventDefault","FormData","append","file","body","componentDidMount","JSON","parse","isLogin","userResult","id_user","is_first_time_login","isFirstTime","handleCloseSnackbar","handleInputChange","event","target","name","value","_handleImageChange","reader","FileReader","files","readAsDataURL","onloadend","logoToSend","copied","openAlert","render","classes","paddingLeft","paddingRight","window","innerWidth","flexDirection","userTypeID","map","pho","TableRowDesign","img_menu","bind","boxShadow","search1","fontSize","borderRadius","background","cursor","fileInputFormenuPic","click","marginRight","submit","success"],"mappings":"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","sourcesContent":["\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/styles';\nimport { withStyles } from '@material-ui/core/styles';\nimport { userContext , getUserById} from '../utils/userContext';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport IconButton from '@material-ui/core/IconButton';\nimport { Link, Redirect } from 'react-router-dom';\nimport Add from '@material-ui/icons/Add';\nimport Modal from '@material-ui/core/Modal';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport icon_camera from '../assets/images/icon_camera.png';\nimport tkp from '../assets/images/tkp.png';\nimport { Alert, AlertTitle } from '@material-ui/lab';\nimport axios from 'axios';\nimport { urlFunction } from '../utils/urls';\nimport { menuPath } from '../utils/img_link';\nimport {Table, Paper, Avatar,Button }from '@material-ui/core';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport Fab from '@material-ui/core/Fab';\nimport Collapse from '@material-ui/core/Collapse';\nimport CloseIcon from '@material-ui/icons/Close';\nimport {CopyToClipboard} from 'react-copy-to-clipboard';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst styles = theme => ({\n  backdrop: {\n\t\tzIndex: theme.zIndex.drawer + 1,\n\t\tcolor: '#fff',\n\t},\n  root: {\n    flexGrow: 1,\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  },\n  content: {\n    padding: 0\n  },\n  item: {\n    padding: theme.spacing(3),\n    textAlign: 'center',\n    [theme.breakpoints.up('md')]: {\n      '&:not(:last-of-type)': {\n        borderRight: `1px solid ${theme.palette.divider}`\n      }\n    },\n    [theme.breakpoints.down('sm')]: {\n      '&:not(:last-of-type)': {\n        borderBottom: `1px solid ${theme.palette.divider}`\n      }\n    }\n  },\n  titleWrapper: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  label: {\n    marginLeft: theme.spacing(1)\n  },\n  overline: {\n    marginTop: theme.spacing(1)\n  },\n  paperModal: {\n    position: 'absolute',\n    marginLeft:\"33%\",\n    marginTop:\"5%\",\n    width: '33%',\n    height: 540,\n    backgroundColor: \"#fff\",\n    border: 'none',\n  }\n});\n\nclass Photos extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n          user: {},\n          userResult: {},\n          photos: [],\n          open: false,\n          imagePreviewUrl: '',\n          value: '',\n          copied: false,\n          openAlert: false,\n          showSucess: false,\n          openBackdrop: false,\n        }\n    }\n\n    getPhotos = async () => {\n        let result = await axios.get(`${urlFunction()}/photo`);\n        if (result.data.length > 0) {\n            this.setState({\n                photos: result.data.reverse() || []\n            })\n        }\n    }\n\n    deletePhoto = async (photo) => {\n        this.setState({\n          openBackdrop: !this.state.openBackdrop\n        })\n       \n        const config = {\n          method  : 'DELETE',\n          headers : {\n            Authorization  : 'bearer ' + this.state.user.token,\n          },\n        };\n       \n        fetch(`${urlFunction()}/photo/${photo.photos_id}`, config)\n          .then((response) => {\n            return response.json();\n          })\n          .then((data) => {\n            if (data) {\n              this.setState({\n               label:'',\n               imagePreviewUrl:'',\n               showProgress: false,\n               showSucess: true,\n               openBackdrop: !this.state.openBackdrop,\n               messageToshow: 'Delete'\n              });\n              this.getPhotos()\n            }\n          })\n          .catch((err) => {\n            this.setState({\n              showProgress: false,\n              error: true,\n              errorMessage: err.message,\n              openBackdrop: !this.state.openBackdrop\n            });\n          });\n    }\n\n\n    setSelectedDate = (date) => {\n        this.setState({ selectedDate: date })\n    }\n\n    handleOpen = () => {\n        this.setState({\n            open:!this.state.open\n        })\n    };\n\n    addPhotoModal = () => {\n        this.setState({\n            open:!this.state.open  \n        })\n    }\n\n\n  _handleSubmit = (e) => {\n\t\tthis.setState({\n\t\t   openBackdrop: !this.state.openBackdrop\n    })\n    \n\t\te.preventDefault();\n\t   const data = new FormData();\n\t   data.append('path',this.state.file)\n\t   data.append('label', this.state.label);\n\t   \n\t   const config = {\n\t\t   method  : 'POST',\n\t\t   headers : {\n\t\t\t   Authorization  : 'bearer ' + this.state.user.token,\n\t\t   },\n\t\t   body    : data,\n     };\n\t\t\n\t   fetch(`${urlFunction()}/photo`, config)\n\t\t   .then((response) => {\n\t\t\t   return response.json();\n\t\t   })\n       .then((data) => {\n         \n\t\t\t   if (data) {\n\t\t\t\t   this.setState({\n            label:'',\n\t\t\t\t\t\timagePreviewUrl:'',\n\t\t\t\t\t\tshowProgress: false,\n\t\t\t\t\t\tshowSucess: true,\n\t\t\t\t\t  openBackdrop: !this.state.openBackdrop,\n\t\t\t\t\t  messageToshow: 'Photo have been add'\n\t\t\t\t   });\n\t\t\t\t   this.getPhotos()\n\t\t\t   }\n\t\t   })\n\t\t   .catch((err) => {\n\t\t\t   this.setState({\n\t\t\t\t   showProgress: false,\n\t\t\t\t   error: true,\n\t\t\t\t   errorMessage: err.message,\n\t\t\t\t   openBackdrop: !this.state.openBackdrop\n\t\t\t   });\n\t\t   });\n\t  }\n\n    componentDidMount = async () => {\n        let user = await userContext();\n        if (user !== null) {\n            this.setState({\n                user: JSON.parse(user),\n                isLogin: true,\n            })\n        } else {\n            this.setState({\n                isLogin: false\n            })\n        }\n    \n        let userResult = await getUserById(JSON.parse(user).data.id_user, JSON.parse(user).token);\n        if (userResult.is_first_time_login == 0) {\n            this.setState({\n                isFirstTime: true\n            })\n        }\n        this.getPhotos()\n    }\n     \n    handleCloseSnackbar = () => {\n      this.setState({\n        showSucess:!this.state.showSucess\n      })\n    }\n        \n    handleInputChange = event => {\n      this.setState({ [event.target.name]: event.target.value });\t\n    };\n \n    _handleImageChange = (e) => {\n\t\te.preventDefault();\n\t\tlet reader = new FileReader();\n\t\tlet file = e.target.files[0];\n\n\t\tif (file) {\n\t\t\treader.readAsDataURL(file);\n\t\t\treader.onloadend = () => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tfile            : file,\n\t\t\t\t\timagePreviewUrl: reader.result,\n\t\t\t\t\tlogoToSend: file\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\t\n    }\n\n    \n    render() {\n        let { classes } = this.props\n        let { openBackdrop,openAlert, imagePreviewUrl, photos, open} = this.state\n\n        if (this.state.isLogin == false) {\n            return <Redirect to='/' />\n        }\n\n        if (this.state.isFirstTime == true) {\n            return <Redirect to={`/customer_details/${this.state.user.data.id_user}`} />\n        }\n        \n        return (\n            <TableContainer style={{\n              marginTop: 80,\n              paddingLeft: 20,\n              paddingRight: 20,\n              width: window.innerWidth - 300,\n        }}>\n\n          <Backdrop className={classes.backdrop} open={openBackdrop} >\n           <CircularProgress color=\"inherit\" />\n          </Backdrop>\n        \n             \n          <div\n           style={{\n            display: \"flex\",\n            flexDirection: \"row\",\n              alignItems: \"center\",\n            justifyContent:\"space-between\"\n          }}>         \n            <h2> Photos </h2>\n              \n              {this.state.user.data ?\n                this.state.user.data.userTypeID == 1 ?\n                  <Button variant=\"contained\" color=\"primary\"\n                    startIcon={<Add />}\n                    onClick={this.addPhotoModal}>\n                    Add photo\n                   </Button> : null\n                : null\n              }\n            </div>\n            \n          <Collapse in={openAlert}>\n                <Alert\n                  action={\n                  <IconButton\n                          aria-label=\"close\"\n                          color=\"inherit\"\n                          size=\"small\"\n                          onClick={() => {\n                            this.setState({\n                              openAlert: false\n                            })\n                          }}\n                  >\n                  <CloseIcon fontSize=\"inherit\" />\n                </IconButton>\n              }\n            >\n              Copied\n            </Alert>\n          </Collapse>\n            <Table\n              component={Paper}\n              aria-label=\"customized table\">\n              <TableRow style={{\n                backgroundColor: \"#fff\"\n              }}>\n                <TableCell> <b> List pictures  </b> </TableCell>\n  \n                <TableCell>\n                  </TableCell>\n                  <TableCell>\n                  </TableCell>                  \n                  <TableCell>\n                  </TableCell>\n              </TableRow>\n            \n              <TableRow style={{\n                backgroundColor: \"#eeefff\"\n              }}>\n                <TableCell>   </TableCell>\n                <TableCell align=\"left\"> Name </TableCell>\n                <TableCell align=\"left\"> Link \n                </TableCell>\n                <TableCell align=\"left\">Actions</TableCell>\n              </TableRow>\n              <TableBody>\n                {photos.map(pho => (\n                  <TableRow\n                    className={classes.TableRowDesign}\n                    style={{\n                    }}>\n                    <TableCell>\n                      <div\n                        style={{\n                          display: \"flex\",\n                          alignItems: \"center\",\n                        }}>\n                        <Avatar\n                              style={{\n                                width: 130,\n                                height: 130\n                            }} >\n                            <img src={`${menuPath}${pho.img_menu}`}\n                              style={{\n                                  width: 130,\n                                  height: 130\n                            }} />\n                        </Avatar>\n                      </div>\n                    </TableCell>\n\n                    <TableCell align=\"left\"> {pho.label} </TableCell>\n\n                    <TableCell align=\"left\">\n                      {`${menuPath}${pho.img_menu}`}\n                      <CopyToClipboard text={`${menuPath}${pho.img_menu}`}\n                        onCopy={() => this.setState({\n                          copied: true,\n                          openAlert: true\n                        })}>\n                        <Button\n                           color=\"primary\">\n                          Copy\n                        </Button>\n                      </CopyToClipboard>\n                    </TableCell>\n                    <TableCell align=\"left\">\n                    {this.state.user.data ?\n                      this.state.user.data.userTypeID == 1 ?\n              \n                        <Fab color=\"secondary\" aria-label=\"add\"\n                            style={{marginLeft: '6px'}}\n                            onClick={\n                                this.deletePhoto.bind(this, pho)\n                            }>\n                            <RemoveIcon />\n                        </Fab>\t\n                     \n                        : null\n                      : null\n                      }\n                         </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n      \n          <Modal\n            open={open}\n            onClose={this.handleOpen}\n            style={{\n                boxShadow: '0px 2px 0px 3px #ccc',\n            }}\n            >\n\n            <div className={classes.paperModal}\n                style={{\n                      boxShadow: '0px 0px 2px #eee',\n                    }}>\n                    <div style={{\n                      backgroundColor: '#0f4c9b',\n                      padding: 12,\n                  }}>\n                                \n                  <div\n                      style={{\n                          display: \"flex\",\n                          flexDirection: \"row\",\n                          alignItems: \"center\",\n                      }}>\n                \n                        <div className={classes.search1}>\n                            <Typography variant=\"h5\" component=\"h2\"\n                                style = {{\n                                    marginLeft: 16,\n                                    color: '#fff',\n                                    fontSize: 15,\n                                }}> \n                                Add a picture \n                            </Typography>\n                        </div>\n                    </div>     \n                </div> \n                        \n                <div\n                    style={{\n                        marginTop: 20,\n                        width: '100%',\n                        backgroundColor: '#fff',\n                        alignItems: 'center',\n                        justifyContent:'center'\n                  }}>       \n                  <div\n                    style={{\n                      backgroundColor: '#fff',                  \n                    }}>\n                        <img\n                            src={imagePreviewUrl == '' ? tkp:imagePreviewUrl}\n                            style={{\n                              padding:10,\n                              height       : 260,\n                              width: 260,\t\n                              borderRadius:150,\n                              background:\"#336699\",\n                              cursor:'pointer'\n                          }}\n                          onClick={() => this.fileInputFormenuPic.click()}\n                          alt=\"Click to add image\"\n                        />\t\n                    \n                      <img\n                          src={icon_camera}\n                          style={{\n                              height       : 40,\n                              width: 40,\t\n                              borderRadius: 40,\n                              padding: 5,\n                              border: '2px solid #eee',\n                              cursor:'pointer'\n                          }}\n                          onClick={() => this.fileInputFormenuPic.click()}\n                          alt=\"Click to add image\"\n                      />\t\n                    </div>\n                        <div\n                            style={{\n                                width: '90%'\n                            }}> \n                                \n                            <TextField\n                                autoComplete=\"fname\"\n                                name=\"label\"\n                                variant=\"outlined\"\n                                required\n                                fullWidth\n                                id=\"label\"\n                                label=\"Photo label\"\n                                autoFocus\n                                onChange={this.handleInputChange}\n                                required={true}\n                                value={this.state.label}\n                                style={{\n                                    marginTop:10,\n                                    marginLeft:10,\n                                    marginRight:10,\n                                }}\n                                />\n                            </div>\n\n                            <input\n                                variant=\"outlined\"\n                                required\n                                fullWidth\n                                name=\"img_restaurant\"\n                                label=\"\"\n                                onChange={this._handleImageChange}  \n                                type=\"file\"\n                                id='file'\n                                \n                                ref={fileInputFormenuPic =>\n                                    (this.fileInputFormenuPic = fileInputFormenuPic)\n                                }\n                                style={{ display: 'none' }}    \n                            />\t\n                            {\n                              this.state.showSucess == true ? \n                                <Alert onClose={this.handleCloseSnackbar} severity=\"success\">\n                                  {this.state.messageToshow}\n                                </Alert>\n                              : null\n                            }\n                            \n                            {this.state.imagePreviewUrl !== '' ? \n                                <div\n                                style={{\n                                        width: '40%',\n                                    marginTop: 20,\n                                    marginLeft: 8,\n                                }}> \n                                <Button\n                                    type=\"submit\"\n                                    fullWidth\n                                    variant=\"contained\"\n                                    color=\"primary\"\n                                    className={classes.submit}\n                                    onClick={this._handleSubmit}>\n                                    Add photo \n                                </Button>\n                                </div>\n                                : null\n                                }\n\t\t\t\t\t\n                              {\n                                this.state.error == true ? \n                                  <Alert severity=\"error\"> {this.state.errorMessage}</Alert>\n                                :\n                                null\n                                              }\n                                              {\n                                this.state.success == true ? \n                                  <Alert severity=\"success\"> Photo add successfully </Alert>\n                                :\n                                null\n                              }\n                    </div>\n                </div>\n            </Modal>\n           \n                \n          </TableContainer>\n       \n\n        )\n      }\n  };\n  \n  export default withStyles(styles) (Photos)\n"]},"metadata":{},"sourceType":"module"}